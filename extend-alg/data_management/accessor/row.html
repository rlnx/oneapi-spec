

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Row accessor &mdash; oneDAL  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicons.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Data Sources" href="../data_sources.html" />
    <link rel="prev" title="Column accessor" href="column.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneDAL
          

          
            
            <img src="../../_static/oneapi-logo1.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notations.html">Mathematical Notations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programming_model/index.html">Programming model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../common_interface/index.html">Common Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Data management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../array.html">Array</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../accessors.html">Accessors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="column.html">Column accessor</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Row accessor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data_sources.html">Data Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tables.html">Tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/index.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">oneDAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../index.html">Data management</a> </li>
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/data_management/accessor/row.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="row-accessor">
<span id="id1"></span><h1>Row accessor<a class="headerlink" href="#row-accessor" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">row_accessor</span></code> class provides a read-only access to the rows of the
<a class="reference internal" href="../index.html#table"><span class="std std-ref">table</span></a> as <a class="reference internal" href="../../glossary.html#term-Contiguous-data"><span class="xref std std-term">contiguous</span></a> <a class="reference internal" href="../../glossary.html#term-Homogeneous-data"><span class="xref std std-term">homogeneous</span></a> array.</p>
<div class="section" id="usage-example">
<h2>Usage example<a class="headerlink" href="#usage-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;CL/sycl.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;oneapi/dal/table/homogen.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;oneapi/dal/table/row_accessor.hpp&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">oneapi</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">sycl</span><span class="o">::</span><span class="n">queue</span> <span class="n">queue</span> <span class="p">{</span> <span class="n">sycl</span><span class="o">::</span><span class="n">default_selector</span><span class="p">()</span> <span class="p">};</span>

   <span class="k">constexpr</span> <span class="kt">float</span> <span class="n">host_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.5f</span><span class="p">,</span> <span class="mf">2.0f</span><span class="p">,</span>
      <span class="mf">2.1f</span><span class="p">,</span> <span class="mf">3.2f</span><span class="p">,</span> <span class="mf">3.7f</span><span class="p">,</span>
      <span class="mf">4.0f</span><span class="p">,</span> <span class="mf">4.9f</span><span class="p">,</span> <span class="mf">5.0f</span><span class="p">,</span>
      <span class="mf">5.2f</span><span class="p">,</span> <span class="mf">6.1f</span><span class="p">,</span> <span class="mf">6.2f</span>
   <span class="p">};</span>

   <span class="k">constexpr</span> <span class="n">std</span><span class="o">::</span><span class="kt">int64_t</span> <span class="n">row_count</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
   <span class="k">constexpr</span> <span class="n">std</span><span class="o">::</span><span class="kt">int64_t</span> <span class="n">column_count</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

   <span class="k">auto</span> <span class="n">shared_data</span> <span class="o">=</span> <span class="n">sycl</span><span class="o">::</span><span class="n">malloc_shared</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">row_count</span> <span class="o">*</span> <span class="n">column_count</span><span class="p">,</span> <span class="n">queue</span><span class="p">);</span>
   <span class="k">auto</span> <span class="n">event</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">memcpy</span><span class="p">(</span><span class="n">shared_data</span><span class="p">,</span> <span class="n">host_data</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="o">*</span> <span class="n">row_count</span> <span class="o">*</span> <span class="n">column_count</span><span class="p">);</span>
   <span class="k">auto</span> <span class="n">t</span> <span class="o">=</span> <span class="n">dal</span><span class="o">::</span><span class="n">homogen_table</span><span class="o">::</span><span class="n">wrap</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">row_count</span><span class="p">,</span> <span class="n">column_count</span><span class="p">,</span> <span class="p">{</span> <span class="n">event</span> <span class="p">});</span>

   <span class="c1">// Accessing second and third rows of the table</span>
   <span class="n">dal</span><span class="o">::</span><span class="n">row_accessor</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">float</span><span class="o">&gt;</span> <span class="n">acc</span> <span class="p">{</span> <span class="n">t</span> <span class="p">};</span>

   <span class="k">auto</span> <span class="n">block</span> <span class="o">=</span> <span class="n">acc</span><span class="p">.</span><span class="n">pull</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">});</span>
   <span class="k">for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">int64_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">block</span><span class="p">.</span><span class="n">get_count</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">block</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

   <span class="n">sycl</span><span class="o">::</span><span class="n">free</span><span class="p">(</span><span class="n">shared_data</span><span class="p">,</span> <span class="n">queue</span><span class="p">);</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="programming-interface">
<h2>Programming interface<a class="headerlink" href="#programming-interface" title="Permalink to this headline">¶</a></h2>
<p>The following declarations are defined in <code class="docutils literal notranslate"><span class="pre">oneapi/dal/table/row_accessor.hpp</span></code>
within <code class="docutils literal notranslate"><span class="pre">oneapi::dal</span></code> namespace.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Data</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">row_accessor</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">using</span> <span class="n">data_t</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">remove_const_t</span><span class="o">&lt;</span><span class="n">Data</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
    <span class="n">row_accessor</span><span class="p">(</span><span class="k">const</span> <span class="n">table</span><span class="o">&amp;</span> <span class="n">obj</span><span class="p">);</span>

    <span class="n">array</span><span class="o">&lt;</span><span class="n">data_t</span><span class="o">&gt;</span> <span class="n">pull</span><span class="p">(</span><span class="n">sycl</span><span class="o">::</span><span class="n">queue</span><span class="o">&amp;</span> <span class="n">queue</span><span class="p">,</span>
                       <span class="k">const</span> <span class="n">range</span><span class="o">&amp;</span> <span class="n">rows</span>             <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">},</span>
                       <span class="k">const</span> <span class="n">sycl</span><span class="o">::</span><span class="n">usm</span><span class="o">::</span><span class="n">alloc</span><span class="o">&amp;</span> <span class="n">alloc</span> <span class="o">=</span> <span class="n">sycl</span><span class="o">::</span><span class="n">usm</span><span class="o">::</span><span class="n">alloc</span><span class="o">::</span><span class="n">shared</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

    <span class="n">Data</span><span class="o">*</span> <span class="nf">pull</span><span class="p">(</span><span class="n">sycl</span><span class="o">::</span><span class="n">queue</span><span class="o">&amp;</span> <span class="n">queue</span><span class="p">,</span>
            <span class="n">array</span><span class="o">&lt;</span><span class="n">data_t</span><span class="o">&gt;&amp;</span> <span class="n">block</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">range</span><span class="o">&amp;</span> <span class="n">rows</span>             <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">},</span>
            <span class="k">const</span> <span class="n">sycl</span><span class="o">::</span><span class="n">usm</span><span class="o">::</span><span class="n">alloc</span><span class="o">&amp;</span> <span class="n">alloc</span> <span class="o">=</span> <span class="n">sycl</span><span class="o">::</span><span class="n">usm</span><span class="o">::</span><span class="n">alloc</span><span class="o">::</span><span class="n">shared</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<dl class="cpp class">
<dt id="_CPPv4I0EN6oneapi3dal12row_accessorE">
<span id="_CPPv3I0EN6oneapi3dal12row_accessorE"></span><span id="_CPPv2I0EN6oneapi3dal12row_accessorE"></span>template&lt;typename <code class="sig-name descname">Data</code>&gt;<br /><em class="property">class </em><code class="sig-name descname">row_accessor</code><a class="headerlink" href="#_CPPv4I0EN6oneapi3dal12row_accessorE" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Template Parameters</dt>
<dd class="field-odd"><p><strong>Data</strong> – The type of data values in blocks returned by the accessor. Shall be const-qualified for read-only access.</p>
</dd>
</dl>
<p><strong>Constructors</strong></p>
<dl class="cpp function">
<dt id="_CPPv4N6oneapi3dal12row_accessor12row_accessorERK5table">
<span id="_CPPv3N6oneapi3dal12row_accessor12row_accessorERK5table"></span><span id="_CPPv2N6oneapi3dal12row_accessor12row_accessorERK5table"></span><span id="oneapi::dal::row_accessor::row_accessor__tableCR"></span><code class="sig-name descname">row_accessor</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="../tables.html#_CPPv4N6oneapi3dal5tableE" title="oneapi::dal::table">table</a> &amp;<em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6oneapi3dal12row_accessor12row_accessorERK5table" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Creates a new read-only accessor object from the table. The check that the accessor supports the table kind of <span class="math notranslate nohighlight">\(obj\)</span> shall be performed. The reference to the <span class="math notranslate nohighlight">\(obj\)</span> table shall be stored within the accessor to obtain data from the table.</p>
</dd></dl>

<p><strong>Public Methods</strong></p>
<dl class="cpp function">
<dt id="_CPPv4NK6oneapi3dal12row_accessor4pullERN4sycl5queueERK5rangeRKN4sycl3usm5allocE">
<span id="_CPPv3NK6oneapi3dal12row_accessor4pullERN4sycl5queueERK5rangeRKN4sycl3usm5allocE"></span><span id="_CPPv2NK6oneapi3dal12row_accessor4pullERN4sycl5queueERK5rangeRKN4sycl3usm5allocE"></span><span id="oneapi::dal::row_accessor::pull__sycl::queueR.rangeCR.sycl::usm::allocCRC"></span><a class="reference internal" href="../array.html#_CPPv4I0EN6oneapi3dal5arrayE" title="oneapi::dal::array">array</a>&lt;data_t&gt; <code class="sig-name descname">pull</code><span class="sig-paren">(</span>sycl::queue &amp;<em>queue</em>, <em class="property">const</em> range &amp;<em>rows</em> = {0, -1}, <em class="property">const</em> sycl::usm::alloc &amp;<em>alloc</em> = sycl::usm::alloc::shared<span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK6oneapi3dal12row_accessor4pullERN4sycl5queueERK5rangeRKN4sycl3usm5allocE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Provides access to the rows of the table. The method shall return an array that directly points to the memory within the table if it is possible. In that case, the array shall refer to the memory as to immutable data. Otherwise, the new memory block shall be allocated, the data from the table rows shall be converted and copied into this block. The array shall refer to the block as to mutable data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queue</strong> – The SYCL* queue object.</p></li>
<li><p><strong>rows</strong> – The range of rows that data shall be returned from the accessor.</p></li>
<li><p><strong>alloc</strong> – The requested kind of USM in the returned block.</p></li>
</ul>
</dd>
</dl>
<dl>
<dt>Preconditions</dt><dd><div class="line-block">
<div class="line"><cite>rows</cite> are within the range of <cite>[0, obj.row_count)</cite>.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK6oneapi3dal12row_accessor4pullERN4sycl5queueER5arrayI6data_tERK5rangeRKN4sycl3usm5allocE">
<span id="_CPPv3NK6oneapi3dal12row_accessor4pullERN4sycl5queueER5arrayI6data_tERK5rangeRKN4sycl3usm5allocE"></span><span id="_CPPv2NK6oneapi3dal12row_accessor4pullERN4sycl5queueER5arrayI6data_tERK5rangeRKN4sycl3usm5allocE"></span><span id="oneapi::dal::row_accessor::pull__sycl::queueR.array:data_t:R.rangeCR.sycl::usm::allocCRC"></span>Data *<code class="sig-name descname">pull</code><span class="sig-paren">(</span>sycl::queue &amp;<em>queue</em>, <a class="reference internal" href="../array.html#_CPPv4I0EN6oneapi3dal5arrayE" title="oneapi::dal::array">array</a>&lt;data_t&gt; &amp;<em>block</em>, <em class="property">const</em> range &amp;<em>rows</em> = {0, -1}, <em class="property">const</em> sycl::usm::alloc &amp;<em>alloc</em> = sycl::usm::alloc::shared<span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK6oneapi3dal12row_accessor4pullERN4sycl5queueER5arrayI6data_tERK5rangeRKN4sycl3usm5allocE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Provides access to the rows of the table. The method shall return the <code class="xref cpp cpp-expr docutils literal notranslate"><a class="reference internal" href="#_CPPv4NK6oneapi3dal12row_accessor4pullERN4sycl5queueER5arrayI6data_tERK5rangeRKN4sycl3usm5allocE" title="oneapi::dal::row_accessor::pull::block"><span class="pre">block</span></a><span class="pre">.</span><span class="pre">data</span></code> pointer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queue</strong> – The SYCL* queue object.</p></li>
<li><p><strong>block</strong> – The block which memory is reused (if it is possible) to obtain the data from the table. The block memory shall be reset either when its size is not big enough, or when it contains immutable data, or when direct memory from the table can be used. If the block is reset to use a direct memory pointer from the object, it shall refer to this pointer as to immutable memory block.</p></li>
<li><p><strong>rows</strong> – The range of rows that data shall be returned from the accessor.</p></li>
<li><p><strong>alloc</strong> – The requested kind of USM in the returned block.</p></li>
</ul>
</dd>
</dl>
<dl>
<dt>Preconditions</dt><dd><div class="line-block">
<div class="line"><cite>rows</cite> are within the range of <cite>[0, obj.row_count)</cite>.</div>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../data_sources.html" class="btn btn-neutral float-right" title="Data Sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="column.html" class="btn btn-neutral float-left" title="Column accessor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Intel

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>