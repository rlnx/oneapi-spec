

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>function_node Template Class &mdash; oneAPI Specification 0.6.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="source_node Class" href="source_node_cls.html" />
    <link rel="prev" title="continue_node Template Class" href="continue_node_cls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.6.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++ (DPC++)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">DPC++ Library (oneDPL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDNN/source/index.html">Deep Neural Network Library (oneDNN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">Collective Communications Library (oneCCL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero (Level Zero)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">Data Analytics Library (oneDAL)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nested-index.html">Threading Building Blocks (oneTBB)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nested-gen-info.html">General Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nested-interfaces.html">oneTBB Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../algorithms.html">Algorithms</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../flow_graph.html">Flow Graph</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="graph_cls.html">graph Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="abstract_interfaces.html">Abstract Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="special_message_types.html">Special Message Types</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="functional_nodes.html">Functional Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="buffering_nodes.html">Buffering Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="service_nodes.html">Service Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="ports_and_edges.html">Ports and Edges</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task_scheduler.html">Task Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../containers.html">Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thread_local_storage.html">Thread Local Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nested-aux-interfaces.html">oneTBB Auxiliary Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">Video Processing Library (oneVPL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">Math Kernel Library (oneMKL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../nested-index.html">Threading Building Blocks (oneTBB)</a> </li>
          
        
          
        
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneTBB/source/flow_graph/func_node_cls.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="function-node-template-class">
<h1>function_node Template Class<a class="headerlink" href="#function-node-template-class" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>A template class that is a <code class="docutils literal notranslate"><span class="pre">graph_node</span></code>,
<code class="docutils literal notranslate"><span class="pre">receiver&lt;Input&gt;</span></code> and a <code class="docutils literal notranslate"><span class="pre">sender&lt;Output&gt;</span></code>. This
node may have concurrency limits as set by the user. By default, a
<code class="docutils literal notranslate"><span class="pre">function_node</span></code> has an internal FIFO buffer at its input. Messages that
cannot be immediately processed due to concurrency limits are temporarily stored in this
FIFO buffer. A template argument can be used to disable this internal buffer. If the FIFO
buffer is disabled, incoming messages will be rejected if they cannot be processed
immediately while respecting the concurrency limits of the node.</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Input</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Output</span> <span class="o">=</span> <span class="n">continue_msg</span><span class="p">,</span>
           <span class="k">typename</span> <span class="n">Policy</span> <span class="o">=</span> <span class="n">queueing</span><span class="p">,</span>
           <span class="k">typename</span> <span class="n">A</span> <span class="o">=</span> <span class="n">cache_aligned_allocator</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">&gt;</span> <span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">function_node</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="header">
<h2>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tbb/flow_graph.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> receives messages of type <code class="docutils literal notranslate"><span class="pre">Input</span></code> at a
single input port and generates a single output message of type <code class="docutils literal notranslate"><span class="pre">Output</span></code>
that is broadcast to all successors.  Rejection of messages by successors is handled using
the protocol described in Message Passing Protocol.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">Policy</span></code> includes <code class="docutils literal notranslate"><span class="pre">queueing</span></code> (see
<code class="docutils literal notranslate"><span class="pre">lightweight</span></code> policy reference for more details), an internal unbounded input
buffer is maintained using memory obtained through an allocator of type
<code class="docutils literal notranslate"><span class="pre">A</span></code>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> maintains an internal constant threshold T and an
internal counter C. At construction, C = 0 and T is set the value passed in to the
constructor. The behavior of a call to <code class="docutils literal notranslate"><span class="pre">try_put</span></code> is determined by the value
of T and C as shown below.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Behavior of a call to a function_node’s try_put</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 24%" />
<col style="width: 18%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value of threshold T</p></th>
<th class="head"><p>Value of counter C</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_put(</span> <span class="pre">const</span> <span class="pre">input_type</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">==</span> <span class="pre">flow::unlimited</span></code></p></td>
<td><p>NA</p></td>
<td><p>A task is spawned that broadcasts the result of <code class="docutils literal notranslate"><span class="pre">body(v)</span></code>
to all successors. Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">!=</span> <span class="pre">flow::unlimited</span></code></p></td>
<td><p>C &lt; T</p></td>
<td><p>Increments C. A task is spawned that broadcasts the result
of <code class="docutils literal notranslate"><span class="pre">body(v)</span></code> to all successors and then decrements C.
Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">!=</span> <span class="pre">flow::unlimited</span></code></p></td>
<td><p>C &gt;= T</p></td>
<td><p>If the template argument <code class="docutils literal notranslate"><span class="pre">Policy</span></code> includes <code class="docutils literal notranslate"><span class="pre">queueing</span></code>,
<code class="docutils literal notranslate"><span class="pre">v</span></code> is stored in an internal FIFO buffer until C &lt; T.
When T becomes less than C, C is incremented and a task is
spawned that broadcasts the result of <code class="docutils literal notranslate"><span class="pre">body(v)</span></code> to all
successors and then decrements C. Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>If the template argument <code class="docutils literal notranslate"><span class="pre">Policy</span></code> includes
<code class="docutils literal notranslate"><span class="pre">rejecting</span></code> and C &gt;= T, returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> has a user-settable concurrency limit.  It can have
<code class="docutils literal notranslate"><span class="pre">flow::unlimited</span></code> concurrency, which allows an unlimited number of
invocations of the body to execute concurrently. It can have <code class="docutils literal notranslate"><span class="pre">flow::serial</span></code>
concurrency, which allows only a single call of body to execute concurrently. The user can
also provide a value of type <code class="docutils literal notranslate"><span class="pre">size_t</span></code> to limit concurrency to a value
between 1 and <code class="docutils literal notranslate"><span class="pre">unlimited</span></code>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> with <code class="docutils literal notranslate"><span class="pre">Policy==rejecting</span></code> will maintain a
predecessor set as described in the Message Passing Protocol. If the
<code class="docutils literal notranslate"><span class="pre">function_node</span></code> transitions from a state where C &gt;= T to a state where C
&lt; T, it will try to get new messages from its set of predecessors until C &gt;= T or
there are no valid predecessors left in the set.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> can serve as a terminal node in the graph. The
convention is to use an <code class="docutils literal notranslate"><span class="pre">Output</span></code> of <code class="docutils literal notranslate"><span class="pre">continue_msg</span></code> and
attach no successor.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Input</span></code> and <code class="docutils literal notranslate"><span class="pre">Output</span></code> must be copy-constructible and
assignable.</p>
<p>The Body concept for <code class="docutils literal notranslate"><span class="pre">function_node</span></code> is shown in below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>function_node&lt;Input, Output&gt; Body Concept: Pseudo-Signature, Semantics</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">B::B(</span> <span class="pre">const</span> <span class="pre">B&amp;</span> <span class="pre">)</span></code></dt><dd><p>Copy constructor.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">B::~B()</span></code></dt><dd><p>Destructor.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">operator=(</span> <span class="pre">const</span> <span class="pre">B&amp;</span> <span class="pre">)</span></code></dt><dd><p>Assignment. The return type <code class="docutils literal notranslate"><span class="pre">void</span></code> in the pseudo-signature denotes
that <code class="docutils literal notranslate"><span class="pre">operator=</span></code> is not required to return a value.  The actual
<code class="docutils literal notranslate"><span class="pre">operator=</span></code> can return a value, which will be ignored.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">B::operator()</span> <span class="pre">(const</span> <span class="pre">Input</span> <span class="pre">&amp;v)</span> <span class="pre">const</span></code></dt><dd><p>Perform operation on <code class="docutils literal notranslate"><span class="pre">v</span></code> and return value of type
<code class="docutils literal notranslate"><span class="pre">Output</span></code>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The body object passed to a <code class="docutils literal notranslate"><span class="pre">function_node</span></code> is copied. Therefore updates
to member variables will not affect the original object used to construct the node. If the
state held within a body object must be inspected from outside of the node, the
<code class="docutils literal notranslate"><span class="pre">copy_body</span></code> function can be used to obtain an updated copy.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The body object may throw or cancel its enclosing graph.  See task_group_context and
Exceptions sections for a description.</p>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="message_flow_graph_example.html"><span class="doc">Data Flow Graph example</span></a>
ilustrates how <code class="docutils literal notranslate"><span class="pre">function_node</span></code> could do computation on input data
and pass the result to successors.</p>
</div>
<div class="section" id="members">
<h2>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">tbb</span> <span class="p">{</span>
<span class="k">namespace</span> <span class="n">flow</span> <span class="p">{</span>

<span class="k">template</span> <span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Input</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Output</span> <span class="o">=</span> <span class="n">continue_msg</span><span class="p">,</span>
           <span class="k">typename</span> <span class="n">Policy</span> <span class="o">=</span> <span class="n">queueing</span><span class="p">,</span>
           <span class="k">typename</span> <span class="n">A</span> <span class="o">=</span> <span class="n">cache_aligned_allocator</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">&gt;</span> <span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">function_node</span> <span class="o">:</span>
  <span class="k">public</span> <span class="n">graph_node</span><span class="p">,</span> <span class="k">public</span> <span class="n">receiver</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">public</span> <span class="n">sender</span><span class="o">&lt;</span><span class="n">Output</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Body</span><span class="o">&gt;</span>
    <span class="n">function_node</span><span class="p">(</span> <span class="n">graph</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">concurrency</span><span class="p">,</span> <span class="n">Body</span> <span class="n">body</span> <span class="p">);</span>
    <span class="n">function_node</span><span class="p">(</span> <span class="k">const</span> <span class="n">function_node</span> <span class="o">&amp;</span><span class="n">src</span> <span class="p">);</span>

    <span class="c1">// receiver&lt;Input&gt;</span>
    <span class="k">typedef</span> <span class="n">Input</span> <span class="n">input_type</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">sender</span><span class="o">&lt;</span><span class="n">input_type</span><span class="o">&gt;</span> <span class="n">predecessor_type</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="nf">try_put</span><span class="p">(</span> <span class="k">const</span> <span class="n">input_type</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">register_predecessor</span><span class="p">(</span> <span class="n">predecessor_type</span> <span class="o">&amp;</span><span class="n">p</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">remove_predecessor</span><span class="p">(</span> <span class="n">predecessor_type</span> <span class="o">&amp;</span><span class="n">p</span> <span class="p">);</span>

    <span class="c1">// sender&lt;Output&gt;</span>
    <span class="k">typedef</span> <span class="n">Output</span> <span class="n">output_type</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">receiver</span><span class="o">&lt;</span><span class="n">output_type</span><span class="o">&gt;</span> <span class="n">successor_type</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="nf">register_successor</span><span class="p">(</span> <span class="n">successor_type</span> <span class="o">&amp;</span><span class="n">r</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">remove_successor</span><span class="p">(</span> <span class="n">successor_type</span> <span class="o">&amp;</span><span class="n">r</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_get</span><span class="p">(</span> <span class="n">output_type</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_reserve</span><span class="p">(</span> <span class="n">output_type</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_release</span><span class="p">(</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_consume</span><span class="p">(</span> <span class="p">);</span>
<span class="p">};</span>

<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following table provides additional information on the members of this template class.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Member, Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">template&lt;</span> <span class="pre">typename</span> <span class="pre">Body</span> <span class="pre">&gt;</span> <span class="pre">function_node(</span> <span class="pre">graph</span> <span class="pre">&amp;g,</span> <span class="pre">size_t</span> <span class="pre">concurrency,</span> <span class="pre">Body</span> <span class="pre">body</span> <span class="pre">)</span></code></dt><dd><p>Constructs a <code class="docutils literal notranslate"><span class="pre">function_node</span></code> that will invoke a copy of
<code class="docutils literal notranslate"><span class="pre">body</span></code>. At most <code class="docutils literal notranslate"><span class="pre">concurrency</span></code> calls to
<code class="docutils literal notranslate"><span class="pre">body</span></code> may be made concurrently.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">function_node(</span> <span class="pre">const</span> <span class="pre">function_node</span> <span class="pre">&amp;src</span> <span class="pre">)</span></code></dt><dd><p>Constructs a <code class="docutils literal notranslate"><span class="pre">function_node</span></code> that has the same initial state that
<code class="docutils literal notranslate"><span class="pre">src</span></code> had when it was constructed. The
<code class="docutils literal notranslate"><span class="pre">function_node</span></code> that is constructed will have a reference to the
same <code class="docutils literal notranslate"><span class="pre">graph</span></code> object as <code class="docutils literal notranslate"><span class="pre">src</span></code>, will have a copy
of the initial body used by <code class="docutils literal notranslate"><span class="pre">src</span></code>, and have the same concurrency
threshold as <code class="docutils literal notranslate"><span class="pre">src</span></code>. The predecessors and successors of
<code class="docutils literal notranslate"><span class="pre">src</span></code> will not be copied.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The new body object is copy-constructed from a copy of the original body
provided to <code class="docutils literal notranslate"><span class="pre">src</span></code> at its construction. Therefore changes made
to member variables in <code class="docutils literal notranslate"><span class="pre">src</span></code>’s body after the construction of
<code class="docutils literal notranslate"><span class="pre">src</span></code> will not affect the body of the new
<code class="docutils literal notranslate"><span class="pre">function_node.</span></code></p>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_put(</span> <span class="pre">const</span> <span class="pre">input_type</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code></dt><dd><p>See the table above, “Behavior of a call to a <code class="docutils literal notranslate"><span class="pre">function_node</span></code>’s
<code class="docutils literal notranslate"><span class="pre">try_put</span></code>,” for more information.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code> if the input was accepted; and
<code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">register_predecessor(predecessor_type</span> <span class="pre">&amp;p</span> <span class="pre">)</span></code></dt><dd><p>Adds <code class="docutils literal notranslate"><span class="pre">p</span></code> to the set of predecessors.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">remove_predecessor(</span> <span class="pre">predecessor_type</span> <span class="pre">&amp;p</span> <span class="pre">)</span></code></dt><dd><p>Removes <code class="docutils literal notranslate"><span class="pre">p</span></code> from the set of predecessors.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">register_successor(</span> <span class="pre">successor_type</span> <span class="pre">&amp;r</span> <span class="pre">)</span></code></dt><dd><p>Adds <code class="docutils literal notranslate"><span class="pre">r</span></code> to the set of successors.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">remove_successor(</span> <span class="pre">successor_type</span> <span class="pre">&amp;r</span> <span class="pre">)</span></code></dt><dd><p>Removes <code class="docutils literal notranslate"><span class="pre">r</span></code> from the set of successors.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_get(</span> <span class="pre">output_type</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> does not contain buffering of its
output. Therefore it always rejects <code class="docutils literal notranslate"><span class="pre">try_get</span></code> calls.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_reserve(</span> <span class="pre">output_type</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> does not contain buffering of its
output. Therefore it cannot be reserved.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_release(</span> <span class="pre">)</span></code></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> does not contain buffering of its
output. Therefore it cannot be reserved.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_consume(</span> <span class="pre">)</span></code></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">function_node</span></code> does not contain buffering of its
output. Therefore it cannot be reserved.</p>
<p><strong>Returns</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
</tr>
</tbody>
</table>
<p>See also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="copy_body_func.html"><span class="doc">copy_body Template Function</span></a></p></li>
<li><p><a class="reference internal" href="../task_scheduler/task_group_context.html"><span class="doc">task_group_context</span></a></p></li>
<li><p><a class="reference internal" href="../exceptions.html"><span class="doc">Exceptions</span></a></p></li>
<li><p><a class="reference internal" href="message_passing_protocol.html"><span class="doc">Message Passing Protocol</span></a></p></li>
<li><p><a class="reference internal" href="sender_and_buffer_policy.html"><span class="doc">Sender and Buffer Policy</span></a></p></li>
<li><p><a class="reference internal" href="lightweight_policy.html"><span class="doc">Lightweight policy</span></a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="source_node_cls.html" class="btn btn-neutral float-right" title="source_node Class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="continue_node_cls.html" class="btn btn-neutral float-left" title="continue_node Template Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>