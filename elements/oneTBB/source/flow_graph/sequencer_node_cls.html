

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sequencer_node Template Class &mdash; oneAPI Specification 0.6.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Service Nodes" href="service_nodes.html" />
    <link rel="prev" title="priority_queue_node Template Class" href="priority_queue_node_cls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.6.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++ (DPC++)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneAPI DPC++ Library (oneDPL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDNN/source/index.html">oneAPI Deep Neural Network Library (oneDNN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">oneAPI Collective Communications Library (oneCCL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">oneAPI Level Zero (Level Zero)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneAPI Data Analytics Library (oneDAL)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nested-index.html">oneAPI Threading Building Blocks (oneTBB)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nested-gen-info.html">General Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nested-interfaces.html">oneTBB Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../algorithms.html">Algorithms</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../flow_graph.html">Flow Graph</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="graph_cls.html">graph Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="abstract_interfaces.html">Abstract Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="special_message_types.html">Special Message Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="functional_nodes.html">Functional Nodes</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="buffering_nodes.html">Buffering Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="service_nodes.html">Service Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="ports_and_edges.html">Ports and Edges</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../task_scheduler.html">Task Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../containers.html">Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thread_local_storage.html">Thread Local Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nested-aux-interfaces.html">oneTBB Auxiliary Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">oneAPI Video Processing Library (oneVPL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneAPI Math Kernel Library (oneMKL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../nested-index.html">oneAPI Threading Building Blocks (oneTBB)</a> </li>
          
        
          
        
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneTBB/source/flow_graph/sequencer_node_cls.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sequencer-node-template-class">
<h1>sequencer_node Template Class<a class="headerlink" href="#sequencer-node-template-class" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>An unbounded buffer of messages of type
<code class="docutils literal notranslate"><span class="pre">T</span></code>. Messages are forwarded in sequence order.</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">A</span> <span class="o">=</span> <span class="n">cache_aligned_allocator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">sequencer_node</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="header">
<h2>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tbb/flow_graph.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>A
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> is a
<code class="docutils literal notranslate"><span class="pre">graph_node</span></code>,
<code class="docutils literal notranslate"><span class="pre">receiver&lt;T&gt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">sender&lt;T&gt;</span></code> that forwards messages in sequence
order to a single successor in its successor set. Successors are tried in the
order that they were registered with the node. If a successor rejects the
message, it is removed from the successor list as described by the policy in
the Message Passing Protocol, and the next successor in the set is tried. This
continues until a successor accepts the message, or all successors have been
attempted. Items that are successfully transferred to a successor are removed
from the buffer.</p>
<p>Each item that passes through a
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> is ordered by its sequencer order
number. These sequence order numbers range from 0 to N, where N is the largest
integer representable by the
<code class="docutils literal notranslate"><span class="pre">size_t</span></code> type. An item’s sequencer order number is
determined by passing the item to a user-provided function object that models
the Sequencer Concept shown below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> will reject duplicate sequencer numbers.</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>sequencer_node&lt;T&gt; Sequencer Concept: Pseudo-Signature, Semantics</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">S::S(</span> <span class="pre">const</span> <span class="pre">S&amp;</span> <span class="pre">)</span></code></dt><dd><p>Copy constructor.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">S::~S()</span></code></dt><dd><p>Destructor.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">operator=(</span> <span class="pre">const</span> <span class="pre">S&amp;</span> <span class="pre">)</span></code></dt><dd><p>Assignment. The return type
<code class="docutils literal notranslate"><span class="pre">void</span></code> in the pseudo-signature denotes that
<code class="docutils literal notranslate"><span class="pre">operator=</span></code> is not required to return a value.
The actual
<code class="docutils literal notranslate"><span class="pre">operator=</span></code> can return a value, which will be
ignored.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">S::operator()(</span> <span class="pre">const</span> <span class="pre">T</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code>&gt;</dt><dd><p>Returns the sequence number for the provided message
<code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
<p>A
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> is reservable and supports a single
reservation at a time. While a
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> is reserved, no other items will be
forwarded to successors and all
<code class="docutils literal notranslate"><span class="pre">try_get</span></code> calls will return
<code class="docutils literal notranslate"><span class="pre">false</span></code>. While reserved,
<code class="docutils literal notranslate"><span class="pre">try_put</span></code> will still return
<code class="docutils literal notranslate"><span class="pre">true</span></code> and add items to the
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code>.</p>
<p>An allocator of type
<code class="docutils literal notranslate"><span class="pre">A</span></code> is used to allocate internal memory for the
<code class="docutils literal notranslate"><span class="pre">sequencer_node.</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">T</span></code> must be copy-constructible and assignable.</p>
<p>Rejection of messages by successors is handled using the protocol described in
the Message Passing Protocol.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The example demonstrates ordering capabilities of the <code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code>.
While being processed in parallel, the data are passed to the successor node
in the exact same order they were read.</p>
<div class="code cpp highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &quot;tbb/flow_graph.h&quot;</span>

<span class="n">struct</span> <span class="n">Message</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="nb">id</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">data</span><span class="p">;</span>
<span class="p">};</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">graph</span> <span class="n">g</span><span class="p">;</span>

    <span class="o">//</span> <span class="n">Due</span> <span class="n">to</span> <span class="n">parallelism</span> <span class="n">the</span> <span class="n">node</span> <span class="n">can</span> <span class="n">push</span> <span class="n">messages</span> <span class="n">to</span> <span class="n">its</span> <span class="n">successors</span> <span class="ow">in</span> <span class="nb">any</span> <span class="n">order</span>
    <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">function_node</span><span class="o">&lt;</span> <span class="n">Message</span><span class="p">,</span> <span class="n">Message</span> <span class="o">&gt;</span> <span class="n">process</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">unlimited</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="n">Message</span> <span class="n">msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span> <span class="p">{</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">data</span><span class="o">++</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">msg</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">sequencer_node</span><span class="o">&lt;</span> <span class="n">Message</span> <span class="o">&gt;</span> <span class="n">ordering</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">[](</span><span class="n">const</span> <span class="n">Message</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">msg</span><span class="o">.</span><span class="n">id</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">function_node</span><span class="o">&lt;</span> <span class="n">Message</span> <span class="o">&gt;</span> <span class="n">writer</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">serial</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="n">const</span> <span class="n">Message</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Message recieved with id: </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">id</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">make_edge</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="n">ordering</span><span class="p">);</span>
    <span class="n">tbb</span><span class="p">::</span><span class="n">flow</span><span class="p">::</span><span class="n">make_edge</span><span class="p">(</span><span class="n">ordering</span><span class="p">,</span> <span class="n">writer</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Message</span> <span class="n">msg</span> <span class="o">=</span> <span class="p">{</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span> <span class="p">};</span>
        <span class="n">process</span><span class="o">.</span><span class="n">try_put</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">g</span><span class="o">.</span><span class="n">wait_for_all</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="members">
<h2>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">tbb</span> <span class="p">{</span>
<span class="k">namespace</span> <span class="n">flow</span> <span class="p">{</span>

<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">A</span> <span class="o">=</span> <span class="n">cache_aligned_allocator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">sequencer_node</span> <span class="o">:</span>
  <span class="k">public</span> <span class="n">queue_node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Sequencer</span> <span class="o">&gt;</span>
    <span class="n">sequencer_node</span><span class="p">(</span> <span class="n">graph</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">,</span> <span class="k">const</span> <span class="n">Sequencer</span> <span class="o">&amp;</span><span class="n">s</span> <span class="p">);</span>
    <span class="n">sequencer_node</span><span class="p">(</span> <span class="k">const</span> <span class="n">sequencer_node</span> <span class="o">&amp;</span><span class="n">src</span> <span class="p">);</span>

    <span class="c1">// receiver&lt;T&gt;</span>
    <span class="k">typedef</span> <span class="n">T</span> <span class="n">input_type</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">sender</span><span class="o">&lt;</span><span class="n">input_type</span><span class="o">&gt;</span> <span class="n">predecessor_type</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="nf">try_put</span><span class="p">(</span> <span class="k">const</span> <span class="n">input_type</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">register_predecessor</span><span class="p">(</span> <span class="n">predecessor_type</span> <span class="o">&amp;</span><span class="n">p</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">remove_predecessor</span><span class="p">(</span> <span class="n">predecessor_type</span> <span class="o">&amp;</span><span class="n">p</span> <span class="p">);</span>

    <span class="c1">// sender&lt;T&gt;</span>
    <span class="k">typedef</span> <span class="n">T</span> <span class="n">output_type</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">receiver</span><span class="o">&lt;</span><span class="n">output_type</span><span class="o">&gt;</span> <span class="n">successor_type</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="nf">register_successor</span><span class="p">(</span> <span class="n">successor_type</span> <span class="o">&amp;</span><span class="n">r</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">remove_successor</span><span class="p">(</span> <span class="n">successor_type</span> <span class="o">&amp;</span><span class="n">r</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_get</span><span class="p">(</span> <span class="n">output_type</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_reserve</span><span class="p">(</span> <span class="n">output_type</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_release</span><span class="p">(</span> <span class="p">);</span>
    <span class="kt">bool</span> <span class="nf">try_consume</span><span class="p">(</span> <span class="p">);</span>
<span class="p">};</span>

<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following table provides additional information on the
members of this template class.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Member, Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">template&lt;typename</span> <span class="pre">Sequencer&gt;</span> <span class="pre">sequencer_node(</span> <span class="pre">graph&amp;</span> <span class="pre">g,</span> <span class="pre">const</span> <span class="pre">Sequencer</span> <span class="pre">&amp;s</span> <span class="pre">)</span></code></dt><dd><p>Constructs an empty
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> that belongs to the
<code class="docutils literal notranslate"><span class="pre">graph</span> <span class="pre">g</span></code> and uses
<code class="docutils literal notranslate"><span class="pre">s</span></code> to compute sequence numbers for items.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Sequencer</span></code> function object must not throw an exception.</p>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">sequencer_node(</span> <span class="pre">const</span> <span class="pre">sequencer_node</span> <span class="pre">&amp;src</span> <span class="pre">)</span></code></dt><dd><p>Constructs an empty
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> that belongs to the same
<code class="docutils literal notranslate"><span class="pre">graph</span> <span class="pre">g</span></code> as
<code class="docutils literal notranslate"><span class="pre">src</span></code> and will use a copy of the
<code class="docutils literal notranslate"><span class="pre">Sequencer</span> <span class="pre">s</span></code> used to construct
<code class="docutils literal notranslate"><span class="pre">src</span></code>. The list of predecessors, the list of
successors and the messages in the buffer are NOT copied.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The new sequencer object is copy-constructed from a copy
of the original sequencer object provided to
<code class="docutils literal notranslate"><span class="pre">src</span></code> at its construction. Therefore
changes made to member variables in
<code class="docutils literal notranslate"><span class="pre">src</span></code>’s object will not affect the
sequencer of the new
<code class="docutils literal notranslate"><span class="pre">sequencer_node.</span></code></p>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_put(</span> <span class="pre">const</span> <span class="pre">input_type</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code></dt><dd><p>Adds
<code class="docutils literal notranslate"><span class="pre">v</span></code> to the
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code>. If
<code class="docutils literal notranslate"><span class="pre">v</span></code>’s sequence number is the next item in
the sequence, a task is spawned to forward the item to a successor.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">register_predecessor(</span> <span class="pre">predecessor_type</span> <span class="pre">&amp;p</span> <span class="pre">)</span></code></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> may reject puts, but the
arc to the <code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> will never be reversed,
so it does not need to maintain a list of predecessors.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">remove_predecessor(</span> <span class="pre">predecessor_type</span> <span class="pre">&amp;p</span> <span class="pre">)</span></code></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> may reject puts, but the
arc to the <code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code> will never be reversed,
so it does not need to maintain a list of predecessors.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">register_successor(</span> <span class="pre">successor_type</span> <span class="pre">&amp;r</span> <span class="pre">)</span></code></dt><dd><p>Adds
<code class="docutils literal notranslate"><span class="pre">r</span></code> to the set of successors.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">remove_successor(</span> <span class="pre">successor_type</span> <span class="pre">&amp;r</span> <span class="pre">)</span></code></dt><dd><p>Removes
<code class="docutils literal notranslate"><span class="pre">r</span></code> from the set of successors.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_get(</span> <span class="pre">output_type</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code></dt><dd><p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">true</span></code> if the next item in the sequence is
available in the
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code>. If so, it is removed from
the node and assigned to
<code class="docutils literal notranslate"><span class="pre">v</span></code>. Returns
<code class="docutils literal notranslate"><span class="pre">false</span></code> if the next item in sequencer order
is not available or if the node is reserved.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_reserve(</span> <span class="pre">output_type</span> <span class="pre">&amp;v</span> <span class="pre">)</span></code></dt><dd><p>If the call returns
<code class="docutils literal notranslate"><span class="pre">true</span></code>, the node is reserved and will
forward no more messages until the reservation has been released or consumed.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">true</span></code> if the next item in sequencer order
is available in the
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code>. If so, the item is
assigned to
<code class="docutils literal notranslate"><span class="pre">v</span></code>, but is not removed from the
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code>. Returns
<code class="docutils literal notranslate"><span class="pre">false</span></code> if the next item in sequencer order
is not available or if the node is reserved.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_release(</span> <span class="pre">)</span></code></dt><dd><p>Releases the reservation on the node. The item that was
returned in the last successful call to
<code class="docutils literal notranslate"><span class="pre">try_reserve</span></code> remains in the
<code class="docutils literal notranslate"><span class="pre">sequencer_node</span></code>.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">true</span></code> if the buffer is currently reserved
and
<code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">try_consume(</span> <span class="pre">)</span></code></dt><dd><p>Releases the reservation on the node. The item that was
returned in the last successful call to
<code class="docutils literal notranslate"><span class="pre">try_reserve</span></code> is popped from the front of
the queue.</p>
<p><strong>Returns</strong>:
<code class="docutils literal notranslate"><span class="pre">true</span></code> if the buffer is currently reserved
and
<code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
</tr>
</tbody>
</table>
<p>See also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="message_passing_protocol.html"><span class="doc">Message Passing Protocol</span></a></p></li>
<li><p><a class="reference internal" href="sender_and_buffer_policy.html"><span class="doc">Sender and Buffer Policy</span></a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="service_nodes.html" class="btn btn-neutral float-right" title="Service Nodes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="priority_queue_node_cls.html" class="btn btn-neutral float-left" title="priority_queue_node Template Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>