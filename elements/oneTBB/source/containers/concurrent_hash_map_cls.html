

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>concurrent_hash_map Template Class &mdash; oneAPI Specification 0.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Whole Table Operations" href="concurrent_hash_map_cls/whole_table_operations.html" />
    <link rel="prev" title="Hash Policy" href="concurrent_unordered_set_cls/hash_policy_set_cls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++ 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneDPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDNN/source/index.html">oneDNN 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">oneCCL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero 0.91</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneDAL 0.7</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nested-index.html">oneTBB 0.7</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nested-gen-info.html">General Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nested-interfaces.html">oneTBB Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../algorithms.html">Algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flow_graph.html">Flow Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task_scheduler.html">Task Scheduler</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../containers.html">Containers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="container_range_concept.html">Container Range Concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="tbb_hash_compare_cls.html">tbb_hash_compare Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="node_handles_cls.html">Node Handles</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_map_cls.html">concurrent_map and concurrent_multimap Template Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_set_cls.html">concurrent_set and concurrent_multiset Template Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_unordered_map_cls.html">concurrent_unordered_map and concurrent_unordered_multimap Template Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_unordered_set_cls.html">concurrent_unordered_set and concurrent_unordered_multiset Template Classes</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">concurrent_hash_map Template Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_queue_cls.html">concurrent_queue Template Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_bounded_queue_cls.html">concurrent_bounded_queue Template Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_priority_queue_cls.html">concurrent_priority_queue Template Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="concurrent_vector.html">concurrent_vector</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../thread_local_storage.html">Thread Local Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nested-aux-interfaces.html">oneTBB Auxiliary Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">oneVPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneMKL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../nested-index.html">oneTBB 0.7</a> </li>
          
        
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneTBB/source/containers/concurrent_hash_map_cls.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="concurrent-hash-map-template-class">
<h1>concurrent_hash_map Template Class<a class="headerlink" href="#concurrent-hash-map-template-class" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>A template class for an associative container with concurrent access.</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Key</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span>
              <span class="k">typename</span> <span class="n">HashCompare</span> <span class="o">=</span> <span class="n">tbb_hash_compare</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;</span><span class="p">,</span>
              <span class="k">typename</span> <span class="n">A</span><span class="o">=</span><span class="n">tbb_allocator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">Key</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">concurrent_hash_map</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="header">
<h2>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tbb/concurrent_hash_map.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">concurrent_hash_map</span></code> maps keys to values in a way that permits multiple
threads to concurrently access values. The keys are unordered. There is at most one element
in a <code class="docutils literal notranslate"><span class="pre">concurrent_hash_map</span></code> for each key. The key may have other elements in
flight but not in the map, as described in Concurrent Operations. The interface resembles
typical STL associative containers, but with some differences critical to supporting
concurrent access. It meets the Container Requirements of the ISO C++ standard. Types
<code class="docutils literal notranslate"><span class="pre">Key</span></code> and <code class="docutils literal notranslate"><span class="pre">T</span></code> must model the CopyConstructible concept. Type
<code class="docutils literal notranslate"><span class="pre">HashCompare</span></code> specifies how keys are hashed and compared for equality. It
must model the HashCompare concept in the table below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>HashCompare Concept: Pseudo-Signature, Semantics</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">HashCompare::HashCompare(</span> <span class="pre">const</span> <span class="pre">HashCompare&amp;</span> <span class="pre">)</span></code></dt><dd><p>Copy constructor.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">HashCompare::~HashCompare()</span></code></dt><dd><p>Destructor.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">HashCompare::equal(</span> <span class="pre">const</span> <span class="pre">Key&amp;</span> <span class="pre">j,</span> <span class="pre">const</span> <span class="pre">Key&amp;</span> <span class="pre">k</span> <span class="pre">)</span> <span class="pre">const</span></code></dt><dd><p>True if keys are equal.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">HashCompare::hash(</span> <span class="pre">const</span> <span class="pre">Key&amp;</span> <span class="pre">k</span> <span class="pre">)</span> <span class="pre">const</span></code></dt><dd><p>Hashcode for key.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>As for most hash tables, if two keys are equal, they must hash to the same hash code. That is,
for a given HashCompare instance <code class="docutils literal notranslate"><span class="pre">h</span></code> and any two keys <code class="docutils literal notranslate"><span class="pre">j</span></code>
and <code class="docutils literal notranslate"><span class="pre">k</span></code>, the following assertion must hold:
<code class="docutils literal notranslate"><span class="pre">&quot;!h.equal(j,k)</span> <span class="pre">||</span> <span class="pre">h.hash(j)==h.hash(k)&quot;</span></code>. The importance of this property
is the reason that <code class="docutils literal notranslate"><span class="pre">concurrent_hash_map</span></code> makes key equality and hashing
function combined in a single object instead of being separate objects. The hash
code of a key must not change while the hash table is non-empty.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Good performance depends on having good pseudo-randomness in the low-order bits of the
hash code.</p>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>When keys are pointers, simply casting the pointer to a hash code may cause poor performance
because the low-order bits of the hash code will be always zero if the pointer points to a
type with alignment restrictions. A way to remove this bias is to divide the cast pointer
by the size of the type, as indicated below in
<code class="docutils literal notranslate"><span class="pre">bold</span> <span class="pre">italic</span> <span class="pre">font</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">size_t</span> <span class="n">MyHashCompare</span><span class="o">::</span><span class="n">hash</span><span class="p">(</span> <span class="n">Key</span><span class="o">*</span> <span class="n">key</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">size_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Key</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="members">
<h2>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h2>
<p>In the following synopsis, methods shown in
<code class="docutils literal notranslate"><span class="pre">bold</span> <span class="pre">font</span></code>
may be concurrently invoked.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">tbb</span> <span class="p">{</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Key</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">HashCompare</span><span class="p">,</span>
                <span class="k">typename</span> <span class="n">Alloc</span> <span class="o">=</span> <span class="n">tbb_allocator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">Key</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span>
    <span class="k">class</span> <span class="nc">concurrent_hash_map</span> <span class="p">{</span>
        <span class="k">public</span><span class="o">:</span>
            <span class="c1">// types</span>
            <span class="k">typedef</span> <span class="n">Key</span> <span class="n">key_type</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="n">T</span> <span class="n">mapped_type</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">Key</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">value_type</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="kt">size_t</span> <span class="n">size_type</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="kt">ptrdiff_t</span> <span class="n">difference_type</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="n">value_type</span><span class="o">*</span> <span class="n">pointer</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="k">const</span> <span class="n">value_type</span><span class="o">*</span> <span class="n">const_pointer</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="n">value_type</span><span class="o">&amp;</span> <span class="n">reference</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="n">Alloc</span> <span class="n">allocator_type</span><span class="p">;</span>

            <span class="c1">// whole-table operations</span>
            <span class="k">explicit</span> <span class="nf">concurrent_hash_map</span><span class="p">(</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="n">a</span><span class="o">=</span><span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="k">explicit</span> <span class="nf">concurrent_hash_map</span><span class="p">(</span> <span class="k">const</span> <span class="n">HashCompare</span><span class="o">&amp;</span> <span class="n">compare</span><span class="p">,</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="n">a</span><span class="o">=</span><span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">size_type</span> <span class="n">n</span><span class="p">,</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span><span class="n">a</span> <span class="o">=</span> <span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">size_type</span> <span class="n">n</span><span class="p">,</span> <span class="k">const</span> <span class="n">HashCompare</span><span class="o">&amp;</span> <span class="n">compare</span><span class="p">,</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="n">a</span><span class="o">=</span><span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="k">const</span> <span class="n">concurrent_hash_map</span><span class="o">&amp;</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="k">const</span> <span class="n">concurrent_hash_map</span><span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="p">);</span>
            <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIterator</span><span class="o">&gt;</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIterator</span><span class="o">&gt;</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">HashCompare</span><span class="o">&amp;</span> <span class="n">compare</span><span class="p">,</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="n">a</span><span class="o">=</span><span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="c1">// Supported since C++11</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">concurrent_hash_map</span><span class="o">&amp;&amp;</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">concurrent_hash_map</span><span class="o">&amp;&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">HashCompare</span><span class="o">&amp;</span> <span class="n">compare</span><span class="p">,</span> <span class="k">const</span> <span class="n">allocator_type</span><span class="o">&amp;</span> <span class="n">a</span><span class="o">=</span><span class="n">allocator_type</span><span class="p">()</span> <span class="p">);</span>
            <span class="o">~</span><span class="n">concurrent_hash_map</span><span class="p">();</span>
            <span class="n">concurrent_hash_map</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span> <span class="k">const</span> <span class="n">concurrent_hash_map</span><span class="o">&amp;</span> <span class="p">);</span>
            <span class="c1">// Supported since C++11</span>
            <span class="n">concurrent_hash_map</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span> <span class="n">concurrent_hash_map</span><span class="o">&amp;&amp;</span> <span class="p">);</span>
            <span class="n">concurrent_hash_map</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span> <span class="n">il</span> <span class="p">);</span>
            <span class="kt">void</span> <span class="nf">rehash</span><span class="p">(</span> <span class="n">size_type</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="kt">void</span> <span class="nf">clear</span><span class="p">();</span>
            <span class="n">allocator_type</span> <span class="nf">get_allocator</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

            <span class="c1">// concurrent access</span>
            <span class="k">class</span> <span class="nc">const_accessor</span><span class="p">;</span>
            <span class="k">class</span> <span class="nc">accessor</span><span class="p">;</span>

            <span class="c1">// concurrent operations on a table</span>
            <span class="kt">bool</span> <span class="nf">find</span><span class="p">(</span> <span class="n">const_accessor</span><span class="o">&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">Key</span><span class="o">&amp;</span> <span class="n">key</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span>
            <span class="kt">bool</span> <span class="nf">find</span><span class="p">(</span> <span class="n">accessor</span><span class="o">&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">Key</span><span class="o">&amp;</span> <span class="n">key</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">insert</span><span class="p">(</span> <span class="n">const_accessor</span><span class="o">&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">Key</span><span class="o">&amp;</span> <span class="n">key</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">insert</span><span class="p">(</span> <span class="n">accessor</span><span class="o">&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">Key</span><span class="o">&amp;</span> <span class="n">key</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">insert</span><span class="p">(</span> <span class="n">const_accessor</span><span class="o">&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">value_type</span><span class="o">&amp;</span> <span class="n">value</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">insert</span><span class="p">(</span> <span class="n">accessor</span><span class="o">&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">value_type</span><span class="o">&amp;</span> <span class="n">value</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">insert</span><span class="p">(</span> <span class="k">const</span> <span class="n">value_type</span><span class="o">&amp;</span> <span class="n">value</span> <span class="p">);</span>
            <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">I</span><span class="o">&gt;</span>
            <span class="kt">void</span> <span class="n">insert</span><span class="p">(</span> <span class="n">I</span> <span class="n">first</span><span class="p">,</span> <span class="n">I</span> <span class="n">last</span> <span class="p">);</span>
            <span class="c1">// Supported since C++11</span>
            <span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span> <span class="n">il</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">erase</span><span class="p">(</span> <span class="k">const</span> <span class="n">Key</span><span class="o">&amp;</span> <span class="n">key</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">erase</span><span class="p">(</span> <span class="n">const_accessor</span><span class="o">&amp;</span> <span class="n">item_accessor</span> <span class="p">);</span>
            <span class="kt">bool</span> <span class="nf">erase</span><span class="p">(</span> <span class="n">accessor</span><span class="o">&amp;</span> <span class="n">item_accessor</span> <span class="p">);</span>

            <span class="c1">// parallel iteration</span>
            <span class="k">typedef</span> <span class="n">implementation</span><span class="o">-</span><span class="n">defined</span> <span class="n">range_type</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="n">implementation</span><span class="o">-</span><span class="n">defined</span> <span class="n">const_range_type</span><span class="p">;</span>
            <span class="n">range_type</span> <span class="nf">range</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">grainsize</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>
            <span class="n">const_range_type</span> <span class="nf">range</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">grainsize</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span>

            <span class="c1">// capacity</span>
            <span class="n">size_type</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
            <span class="kt">bool</span> <span class="nf">empty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
            <span class="n">size_type</span> <span class="nf">max_size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
            <span class="n">size_type</span> <span class="nf">bucket_count</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

            <span class="c1">// iterators</span>
            <span class="k">typedef</span> <span class="n">implementation</span><span class="o">-</span><span class="n">defined</span> <span class="n">iterator</span><span class="p">;</span>
            <span class="k">typedef</span> <span class="n">implementation</span><span class="o">-</span><span class="n">defined</span> <span class="n">const_iterator</span><span class="p">;</span>
            <span class="n">iterator</span> <span class="nf">begin</span><span class="p">();</span>
            <span class="n">iterator</span> <span class="nf">end</span><span class="p">();</span>
            <span class="n">const_iterator</span> <span class="nf">begin</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
            <span class="n">const_iterator</span> <span class="nf">end</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
            <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">iterator</span><span class="p">,</span> <span class="n">iterator</span><span class="o">&gt;</span> <span class="n">equal_range</span><span class="p">(</span> <span class="k">const</span> <span class="n">Key</span><span class="o">&amp;</span> <span class="n">key</span> <span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">const_iterator</span><span class="p">,</span> <span class="n">const_iterator</span><span class="o">&gt;</span> <span class="n">equal_range</span><span class="p">(</span> <span class="k">const</span> <span class="n">Key</span><span class="o">&amp;</span> <span class="n">key</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Key</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">HashCompare</span><span class="p">,</span> <span class="k">typename</span> <span class="n">A1</span><span class="p">,</span> <span class="k">typename</span> <span class="n">A2</span><span class="o">&gt;</span>
        <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span> <span class="k">const</span> <span class="n">concurrent_hash_map</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">HashCompare</span><span class="p">,</span><span class="n">A1</span><span class="o">&gt;&amp;</span> <span class="n">a</span><span class="p">,</span>
                         <span class="k">const</span> <span class="n">concurrent_hash_map</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">HashCompare</span><span class="p">,</span><span class="n">A2</span><span class="o">&gt;&amp;</span> <span class="n">b</span><span class="p">);</span>

        <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Key</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">HashCompare</span><span class="p">,</span> <span class="k">typename</span> <span class="n">A1</span><span class="p">,</span> <span class="k">typename</span> <span class="n">A2</span><span class="o">&gt;</span>
        <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span> <span class="k">const</span> <span class="n">concurrent_hash_map</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">HashCompare</span><span class="p">,</span><span class="n">A1</span><span class="o">&gt;&amp;</span> <span class="n">a</span><span class="p">,</span>
                         <span class="k">const</span> <span class="n">concurrent_hash_map</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">HashCompare</span><span class="p">,</span><span class="n">A2</span><span class="o">&gt;&amp;</span> <span class="n">b</span> <span class="p">);</span>

        <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Key</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">HashCompare</span><span class="p">,</span> <span class="k">typename</span> <span class="n">A</span><span class="o">&gt;</span>
        <span class="kt">void</span> <span class="n">swap</span><span class="p">(</span> <span class="n">concurrent_hash_map</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">HashCompare</span><span class="p">,</span><span class="n">A</span><span class="o">&gt;&amp;</span> <span class="n">a</span><span class="p">,</span>
                   <span class="n">concurrent_hash_map</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">HashCompare</span><span class="p">,</span><span class="n">A</span><span class="o">&gt;&amp;</span> <span class="n">b</span> <span class="p">);</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Where possible, constructors of <code class="docutils literal notranslate"><span class="pre">concurrent_hash_map</span></code> support class template argument deduction for C++17. For example</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">v</span> <span class="p">{{</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;one&quot;</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">}};</span>
<span class="n">tbb</span><span class="o">::</span><span class="n">concurrent_hash_map</span> <span class="n">hmap</span> <span class="p">{</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">()};</span>
</pre></div>
</div>
<p>declares <code class="docutils literal notranslate"><span class="pre">hmap</span></code> as <code class="docutils literal notranslate"><span class="pre">tbb::concurrent_hash_map&lt;int,</span> <span class="pre">std::string,</span> <span class="pre">tbb::tbb_hash_compare&lt;int&gt;,</span> <span class="pre">tbb::tbb_allocator&lt;std::pair&lt;const</span> <span class="pre">int,</span> <span class="pre">std::string&gt;&gt;&gt;</span></code>.</p>
</div>
<div class="section" id="exception-safety">
<h2>Exception Safety<a class="headerlink" href="#exception-safety" title="Permalink to this headline">¶</a></h2>
<p>The following functions must not throw exceptions:</p>
<ul class="simple">
<li><p>The hash function</p></li>
<li><p>The destructors for types <code class="docutils literal notranslate"><span class="pre">Key</span></code> and <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></li>
</ul>
<p>The following holds true:</p>
<ul class="simple">
<li><p>If an exception happens during an insert operation, the operation has no effect.</p></li>
<li><p>If an exception happens during an assignment operation, the container may be in a state
where only some of the items were assigned, and methods <code class="docutils literal notranslate"><span class="pre">size()</span></code> and
<code class="docutils literal notranslate"><span class="pre">empty()</span></code> may return invalid answers.</p></li>
</ul>
<p>See also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="tbb_hash_compare_cls.html"><span class="doc">tbb_hash_compare</span></a></p></li>
<li><p><a class="reference internal" href="concurrent_unordered_map_cls.html"><span class="doc">concurrent_unordered_map</span></a></p></li>
<li><p><a class="reference internal" href="concurrent_unordered_set_cls.html"><span class="doc">concurrent_unordered_set</span></a></p></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="concurrent_hash_map_cls/whole_table_operations.html">Whole Table Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html">Concurrent Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#const-accessor">const_accessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#members">Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#accessor">accessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#id1">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#id2">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#id3">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_access.html#id4">Members</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="concurrent_hash_map_cls/concurrent_operations_hash.html">Concurrent Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="concurrent_hash_map_cls/parallel_iteration_container.html">Parallel Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="concurrent_hash_map_cls/capacity_map_cls.html">Capacity</a></li>
<li class="toctree-l1"><a class="reference internal" href="concurrent_hash_map_cls/iterators_hash_map_cls.html">Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="concurrent_hash_map_cls/global_funcs.html">Global Functions</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="concurrent_hash_map_cls/whole_table_operations.html" class="btn btn-neutral float-right" title="Whole Table Operations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="concurrent_unordered_set_cls/hash_policy_set_cls.html" class="btn btn-neutral float-left" title="Hash Policy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>