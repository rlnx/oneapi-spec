

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Partitioners &mdash; oneAPI Specification 0.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="auto_partitioner Class" href="partitioners/auto_partitioner_cls.html" />
    <link rel="prev" title="blocked_rangeNd Template Class" href="range_concept/blocked_rangeNd_cls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++ 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneDPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDNN/source/index.html">oneDNN 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">oneCCL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero 0.91</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneDAL 0.7</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nested-index.html">oneTBB 0.7</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nested-gen-info.html">General Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nested-interfaces.html">oneTBB Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../algorithms.html">Algorithms</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="splittable_concept.html">Splittable Concept</a></li>
<li class="toctree-l4"><a class="reference internal" href="range_concept.html">Range Concept</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Partitioners</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_for_func.html">parallel_for Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_reduce_func.html">parallel_reduce Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_deterministic_reduce_func.html">parallel_deterministic_reduce Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_scan_func.html">parallel_scan Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_do_func.html">parallel_do Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_for_each_func.html">parallel_for_each Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_invoke_func.html">parallel_invoke Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="variadic_parallel_invoke_func.html">parallel_invoke Variadic Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_pipeline_func.html">parallel_pipeline Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="parallel_sort_func.html">parallel_sort Template Function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../flow_graph.html">Flow Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task_scheduler.html">Task Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../containers.html">Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thread_local_storage.html">Thread Local Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nested-aux-interfaces.html">oneTBB Auxiliary Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">oneVPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneMKL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../nested-index.html">oneTBB 0.7</a> </li>
          
        
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneTBB/source/algorithms/partitioners.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="partitioners">
<h1>Partitioners<a class="headerlink" href="#partitioners" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>A partitioner specifies how a loop template should partition its work among threads.</p>
</div>
<div class="section" id="partitioner-types">
<h2>Partitioner Types<a class="headerlink" href="#partitioner-types" title="Permalink to this headline">¶</a></h2>
<p>The default behavior of the loop templates <code class="docutils literal notranslate"><span class="pre">parallel_for</span></code>,
<code class="docutils literal notranslate"><span class="pre">parallel_reduce</span></code>, and <code class="docutils literal notranslate"><span class="pre">parallel_scan</span></code> tries to recursively
split a range into enough parts to keep processors busy, not necessarily splitting as finely
as possible. An optional partitioner parameter enables other behaviors to be specified, as
shown in the table below. The first column of the table shows how the formal parameter is
declared in the loop templates. An <code class="docutils literal notranslate"><span class="pre">affinity_partitioner</span></code> is passed by
non-const reference because it is updated to remember where loop iterations run.
The template <code class="docutils literal notranslate"><span class="pre">parallel_deterministic_reduce</span></code> supports <code class="docutils literal notranslate"><span class="pre">simple_partitioner</span></code> and <code class="docutils literal notranslate"><span class="pre">static_partitioner</span></code> only.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Partitioners: Partitioner, Loop Behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">auto_partitioner&amp;</span> <span class="pre">(default)</span></code></dt><dd><p>Performs sufficient splitting to balance load, not necessarily splitting as
finely as <code class="docutils literal notranslate"><span class="pre">Range::is_divisible</span></code> permits. When used with classes
such as <code class="docutils literal notranslate"><span class="pre">blocked_range</span></code>, the selection of an appropriate
grain size is less important, and often acceptable performance can be achieved
with the default grain size of 1.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">affinity_partitioner&amp;</span></code></dt><dd><p>Similar to <code class="docutils literal notranslate"><span class="pre">auto_partitioner</span></code>, but improves cache affinity by its
choice of mapping subranges to worker threads. It can improve performance
significantly when a loop is re-executed over the same data set, and the data
set fits in the cache.</p>
<p><code class="docutils literal notranslate"><span class="pre">affinity_partitioner</span></code> uses proportional splitting when it is
enabled for a <code class="docutils literal notranslate"><span class="pre">Range</span></code>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">static_partitioner&amp;</span></code></dt><dd><p>Distributes range iterations among worker threads as uniformly as possible,
without a possibility for further load balancing. Similarly to
<code class="docutils literal notranslate"><span class="pre">affinity_partitioner</span></code>, maps subranges to worker threads. The
work distribution and mapping are deterministic and only depend on the number of
range iterations, its grain size and the number of threads.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">simple_partitioner&amp;</span></code> (default for parallel_deterministic_reduce)</dt><dd><p>Recursively splits a range until it is no longer divisible. The
<code class="docutils literal notranslate"><span class="pre">Range::is_divisible</span></code> function is wholly responsible for deciding
when recursive splitting halts. When used with classes such as
<code class="docutils literal notranslate"><span class="pre">blocked_range</span></code>, the selection of an appropriate grain size is
critical to enabling concurrency while limiting overheads (see the discussion in
the blocked_range Template Class section).</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
<p>See also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="parallel_for_func.html"><span class="doc">parallel_for Template Function</span></a></p></li>
<li><p><a class="reference internal" href="parallel_reduce_func.html"><span class="doc">parallel_reduce Template Function</span></a></p></li>
<li><p><a class="reference internal" href="parallel_scan_func.html"><span class="doc">parallel_scan Template Function</span></a></p></li>
<li><p><a class="reference internal" href="range_concept/blocked_range_cls.html"><span class="doc">blocked_range Template Class</span></a></p></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="partitioners/auto_partitioner_cls.html">auto_partitioner Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partitioners/auto_partitioner_cls.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/auto_partitioner_cls.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/auto_partitioner_cls.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/auto_partitioner_cls.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/auto_partitioner_cls.html#members">Members</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="partitioners/affinity_partitioner.html">affinity_partitioner Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partitioners/affinity_partitioner.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/affinity_partitioner.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/affinity_partitioner.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/affinity_partitioner.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/affinity_partitioner.html#members">Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/affinity_partitioner.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="partitioners/static_partitioner.html">static_partitioner Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partitioners/static_partitioner.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/static_partitioner.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/static_partitioner.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/static_partitioner.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/static_partitioner.html#members">Members</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="partitioners/simple_partitioner_cls.html">simple_partitioner Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partitioners/simple_partitioner_cls.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/simple_partitioner_cls.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/simple_partitioner_cls.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/simple_partitioner_cls.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioners/simple_partitioner_cls.html#members">Members</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="partitioners/auto_partitioner_cls.html" class="btn btn-neutral float-right" title="auto_partitioner Class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="range_concept/blocked_rangeNd_cls.html" class="btn btn-neutral float-left" title="blocked_rangeNd Template Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>