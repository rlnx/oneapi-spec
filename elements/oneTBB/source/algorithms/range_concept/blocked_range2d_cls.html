

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>blocked_range2d Template Class &mdash; oneAPI Specification 0.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
        <script src="../../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="blocked_range3d Template Class" href="blocked_range3d_cls.html" />
    <link rel="prev" title="blocked_range Template Class" href="blocked_range_cls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dpcpp/source/index.html">DPC++ 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../oneDPL/source/index.html">oneDPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../oneDNN/source/index.html">oneDNN 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../oneCCL/source/index.html">oneCCL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../l0/source/index.html">Level Zero 0.91</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../oneDAL/source/index.html">oneDAL 0.7</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nested-index.html">oneTBB 0.7</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../nested-gen-info.html">General Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../nested-interfaces.html">oneTBB Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../algorithms.html">Algorithms</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../splittable_concept.html">Splittable Concept</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../range_concept.html">Range Concept</a></li>
<li class="toctree-l4"><a class="reference internal" href="../partitioners.html">Partitioners</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_for_func.html">parallel_for Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_reduce_func.html">parallel_reduce Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_deterministic_reduce_func.html">parallel_deterministic_reduce Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_scan_func.html">parallel_scan Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_do_func.html">parallel_do Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_for_each_func.html">parallel_for_each Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_invoke_func.html">parallel_invoke Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../variadic_parallel_invoke_func.html">parallel_invoke Variadic Template Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_pipeline_func.html">parallel_pipeline Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_sort_func.html">parallel_sort Template Function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../flow_graph.html">Flow Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../task_scheduler.html">Task Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../containers.html">Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../thread_local_storage.html">Thread Local Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nested-aux-interfaces.html">oneTBB Auxiliary Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../oneVPL/source/index.html">oneVPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../oneMKL/source/index.html">oneMKL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../../nested-index.html">oneTBB 0.7</a> </li>
          
        
          
        
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneTBB/source/algorithms/range_concept/blocked_range2d_cls.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="blocked-range2d-template-class">
<h1>blocked_range2d Template Class<a class="headerlink" href="#blocked-range2d-template-class" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Template class that represents recursively divisible two-dimensional
half-open interval.</p>
</div>
<div class="section" id="header">
<h2>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tbb/blocked_range2d.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">RowValue</span><span class="p">,</span> <span class="k">typename</span> <span class="n">ColValue</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">blocked_range2d</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">blocked_range2d&lt;RowValue</span> <span class="pre">,ColValue</span> <span class="pre">&gt;</span></code> represents a half-open
two-dimensional range
<code class="docutils literal notranslate"><span class="pre">[i0,j0)×[i1,j1)</span></code>. Each
axis of the range has its own splitting threshold. The <em>RowValue</em> and <em>ColValue</em> must meet the
requirements in the table in the blocked_range Template Class section. A <code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> is
divisible if either axis is divisible. A <code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> models the Range concept.</p>
</div>
<div class="section" id="members">
<h2>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">tbb</span> <span class="p">{</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">RowValue</span><span class="p">,</span> <span class="k">typename</span> <span class="n">ColValue</span><span class="o">=</span><span class="n">RowValue</span><span class="o">&gt;</span>
    <span class="k">class</span> <span class="nc">blocked_range2d</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="c1">// Types</span>
        <span class="k">typedef</span> <span class="n">blocked_range</span><span class="o">&lt;</span><span class="n">RowValue</span><span class="o">&gt;</span> <span class="n">row_range_type</span><span class="p">;</span>
        <span class="k">typedef</span> <span class="n">blocked_range</span><span class="o">&lt;</span><span class="n">ColValue</span><span class="o">&gt;</span> <span class="n">col_range_type</span><span class="p">;</span>

        <span class="c1">// Constructors</span>
        <span class="n">blocked_range2d</span><span class="p">(</span>
            <span class="n">RowValue</span> <span class="n">row_begin</span><span class="p">,</span> <span class="n">RowValue</span> <span class="n">row_end</span><span class="p">,</span>
            <span class="k">typename</span> <span class="n">row_range_type</span><span class="o">::</span><span class="n">size_type</span> <span class="n">row_grainsize</span><span class="p">,</span>
            <span class="n">ColValue</span> <span class="n">col_begin</span><span class="p">,</span> <span class="n">ColValue</span> <span class="n">col_end</span><span class="p">,</span>
            <span class="k">typename</span> <span class="n">col_range_type</span><span class="o">::</span><span class="n">size_type</span> <span class="n">col_grainsize</span><span class="p">);</span>
        <span class="n">blocked_range2d</span><span class="p">(</span> <span class="n">RowValue</span> <span class="n">row_begin</span><span class="p">,</span> <span class="n">RowValue</span> <span class="n">row_end</span><span class="p">,</span>
                         <span class="n">ColValue</span> <span class="n">col_begin</span><span class="p">,</span> <span class="n">ColValue</span> <span class="n">col_end</span><span class="p">);</span>
        <span class="c1">// Splitting constructors</span>
        <span class="n">blocked_range2d</span><span class="p">(</span> <span class="n">blocked_range2d</span><span class="o">&amp;</span> <span class="n">r</span><span class="p">,</span> <span class="n">split</span> <span class="p">);</span>
        <span class="n">blocked_range2d</span><span class="p">(</span> <span class="n">blocked_range2d</span><span class="o">&amp;</span> <span class="n">r</span><span class="p">,</span> <span class="n">proportional_split</span> <span class="n">proportion</span> <span class="p">);</span>

        <span class="c1">// Proportional split is enabled</span>
        <span class="k">static</span> <span class="k">const</span> <span class="kt">bool</span> <span class="n">is_splittable_in_proportion</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

        <span class="c1">// Capacity</span>
        <span class="kt">bool</span> <span class="nf">empty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

        <span class="c1">// Access</span>
        <span class="kt">bool</span> <span class="nf">is_divisible</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">row_range_type</span><span class="o">&amp;</span> <span class="n">rows</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">col_range_type</span><span class="o">&amp;</span> <span class="n">cols</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Constructors of <code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> support class template argument deduction for C++17. For example</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">tbb</span><span class="o">::</span><span class="n">blocked_range2d</span> <span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="kt">size_t</span><span class="p">(</span><span class="mi">50</span><span class="p">));</span>
</pre></div>
</div>
<p>declares <code class="docutils literal notranslate"><span class="pre">range</span></code> as <code class="docutils literal notranslate"><span class="pre">tbb::blocked_range&lt;int,</span> <span class="pre">size_t&gt;</span></code>.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The code that follows shows a serial matrix
multiply, and the corresponding parallel matrix multiply that uses a
<code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> to specify the iteration space.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">const</span> <span class="kt">size_t</span> <span class="n">L</span> <span class="o">=</span> <span class="mi">150</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">size_t</span> <span class="n">M</span> <span class="o">=</span> <span class="mi">225</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">size_t</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">SerialMatrixMultiply</span><span class="p">(</span> <span class="kt">float</span> <span class="n">c</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">N</span><span class="p">],</span> <span class="kt">float</span> <span class="n">a</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">L</span><span class="p">],</span> <span class="kt">float</span> <span class="n">b</span><span class="p">[</span><span class="n">L</span><span class="p">][</span><span class="n">N</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kt">float</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">L</span><span class="p">;</span> <span class="o">++</span><span class="n">k</span> <span class="p">)</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
            <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">sum</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tbb/parallel_for.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;tbb/blocked_range2d.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">tbb</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">size_t</span> <span class="n">L</span> <span class="o">=</span> <span class="mi">150</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">size_t</span> <span class="n">M</span> <span class="o">=</span> <span class="mi">225</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">size_t</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MatrixMultiplyBody2D</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="n">my_a</span><span class="p">)[</span><span class="n">L</span><span class="p">];</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="n">my_b</span><span class="p">)[</span><span class="n">N</span><span class="p">];</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="n">my_c</span><span class="p">)[</span><span class="n">N</span><span class="p">];</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="k">operator</span><span class="p">()(</span> <span class="k">const</span> <span class="n">blocked_range2d</span><span class="o">&lt;</span><span class="kt">size_t</span><span class="o">&gt;&amp;</span> <span class="n">r</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">)[</span><span class="n">L</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_a</span><span class="p">;</span>
        <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="n">b</span><span class="p">)[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_b</span><span class="p">;</span>
        <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">)[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_c</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">i</span><span class="o">=</span><span class="n">r</span><span class="p">.</span><span class="n">rows</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="n">i</span><span class="o">!=</span><span class="n">r</span><span class="p">.</span><span class="n">rows</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span> <span class="p">){</span>
            <span class="k">for</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">j</span><span class="o">=</span><span class="n">r</span><span class="p">.</span><span class="n">cols</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="n">j</span><span class="o">!=</span><span class="n">r</span><span class="p">.</span><span class="n">cols</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">j</span> <span class="p">)</span> <span class="p">{</span>
                <span class="kt">float</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">for</span><span class="p">(</span> <span class="kt">size_t</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">L</span><span class="p">;</span> <span class="o">++</span><span class="n">k</span> <span class="p">)</span>
                    <span class="n">sum</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
                <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">sum</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">MatrixMultiplyBody2D</span><span class="p">(</span> <span class="kt">float</span> <span class="n">c</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">N</span><span class="p">],</span> <span class="kt">float</span> <span class="n">a</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">L</span><span class="p">],</span> <span class="kt">float</span> <span class="n">b</span><span class="p">[</span><span class="n">L</span><span class="p">][</span><span class="n">N</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span>
        <span class="n">my_a</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">my_b</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">my_c</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="p">{}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">ParallelMatrixMultiply</span><span class="p">(</span><span class="kt">float</span> <span class="n">c</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">N</span><span class="p">],</span> <span class="kt">float</span> <span class="n">a</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">L</span><span class="p">],</span> <span class="kt">float</span> <span class="n">b</span><span class="p">[</span><span class="n">L</span><span class="p">][</span><span class="n">N</span><span class="p">]){</span>
    <span class="n">parallel_for</span><span class="p">(</span> <span class="n">blocked_range2d</span><span class="o">&lt;</span><span class="kt">size_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span>
                  <span class="n">MatrixMultiplyBody2D</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> enables the
two outermost loops of the serial version to become parallel loops. The <code class="docutils literal notranslate"><span class="pre">parallel_for</span></code> recursively splits the
<code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> until the pieces are no larger than 16x32. It invokes
<code class="docutils literal notranslate"><span class="pre">MatrixMultiplyBody2D::operator()</span></code> on each piece.</p>
<p>The following table provides additional information on the
members of this template class.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Member, Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">row_range_type</span></code></dt><dd><p>A
<code class="docutils literal notranslate"><span class="pre">blocked_range&lt;RowValue&gt;</span></code>. That is, the
type of the row values.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">col_range_type</span></code></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">blocked_range&lt;ColValue&gt;</span></code>. That is, the type of the column values.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">blocked_range2d&lt;RowValue,ColValue&gt;(</span> <span class="pre">RowValue</span> <span class="pre">row_begin,</span> <span class="pre">RowValue</span> <span class="pre">row_end,</span> <span class="pre">typename</span> <span class="pre">row_range_type::size_type</span> <span class="pre">row_grainsize,</span> <span class="pre">ColValue</span> <span class="pre">col_begin,</span> <span class="pre">ColValue</span> <span class="pre">col_end,</span> <span class="pre">typename</span> <span class="pre">col_range_type::size_type</span> <span class="pre">col_grainsize</span> <span class="pre">)</span></code></dt><dd><p><strong>Effects:</strong>  Constructs a
<code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> representing a two-dimensional
space of values. The space is the half-open Cartesian
product <code class="docutils literal notranslate"><span class="pre">[row_begin,</span> <span class="pre">row_end)</span> <span class="pre">x</span> <span class="pre">[col_begin,</span> <span class="pre">col_end)</span></code>, with
the given grain sizes for the rows and columns.</p>
<p><strong>Example:</strong>  The statement
<code class="docutils literal notranslate"><span class="pre">blocked_range2d&lt;char,int&gt;</span> <span class="pre">r('a',</span> <span class="pre">'z'+1,</span> <span class="pre">3,</span> <span class="pre">0,</span> <span class="pre">10,</span> <span class="pre">2</span> <span class="pre">);</span></code> constructs a two-dimensional
space that contains all value
pairs of the form <code class="docutils literal notranslate"><span class="pre">(i,</span> <span class="pre">j)</span></code>, where <code class="docutils literal notranslate"><span class="pre">i</span></code> ranges from <code class="docutils literal notranslate"><span class="pre">'a'</span></code> to
<code class="docutils literal notranslate"><span class="pre">'z'</span></code> with a grain size of 3, and <code class="docutils literal notranslate"><span class="pre">j</span></code> ranges from 0 to 9 with a grain size of 2.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocked_range2d&lt;RowValue,ColValue&gt;(</span> <span class="pre">RowValue</span> <span class="pre">row_begin,</span> <span class="pre">RowValue</span> <span class="pre">row_end,</span> <span class="pre">ColValue</span> <span class="pre">col_begin,</span> <span class="pre">ColValue</span> <span class="pre">col_end</span> <span class="pre">)</span></code></dt><dd><p>Same as
<code class="docutils literal notranslate"><span class="pre">blocked_range2d(row_begin,row_end,1,col_begin,col_end,1)</span></code>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">blocked_range2d&lt;RowValue,ColValue&gt;</span> <span class="pre">(</span> <span class="pre">blocked_range2d&amp;</span> <span class="pre">range,</span> <span class="pre">split</span> <span class="pre">)</span></code></dt><dd><p>Basic splitting constructor.</p>
<p><strong>Requirements</strong>: <code class="docutils literal notranslate"><span class="pre">is_divisible()</span></code> is true.</p>
<p><strong>Effects</strong>: Partitions range into two subranges. The newly constructed <code class="docutils literal notranslate"><span class="pre">blocked_range2d</span></code> is
approximately the second half of the original <code class="docutils literal notranslate"><span class="pre">range</span></code>, and <code class="docutils literal notranslate"><span class="pre">range</span></code> is updated to
be the remainder. Each subrange has the same grain size as the original <code class="docutils literal notranslate"><span class="pre">range</span></code>. The split is
either by rows or columns. The choice of which axis to split is intended to cause, after repeated splitting, the
subranges to approach the aspect ratio of the respective row and column grain sizes. For example, if the
<code class="docutils literal notranslate"><span class="pre">row_grainsize</span></code> is twice <code class="docutils literal notranslate"><span class="pre">col_grainsize</span></code>, the subranges will tend towards having
twice as many rows as columns.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">blocked_range2d&lt;RowValue,ColValue&gt;</span> <span class="pre">(</span> <span class="pre">blocked_range2d&amp;</span> <span class="pre">range,</span> <span class="pre">proportional_split</span> <span class="pre">proportion</span> <span class="pre">)</span></code></dt><dd><p>Proportional splitting constructor.</p>
<p><strong>Requirements</strong>: <code class="docutils literal notranslate"><span class="pre">is_divisible()</span></code> is true.</p>
<p><strong>Effects</strong>: Partitions <code class="docutils literal notranslate"><span class="pre">range</span></code> into two subranges in the given <code class="docutils literal notranslate"><span class="pre">proportion</span></code>
across one of its axes. The choice of which axis to split is made in the same way as for the basic splitting
constructor; then, proportional splitting is done for the chosen axis. The second axis and the grain sizes for
each subrange remain the same as in the original range.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">empty()</span> <span class="pre">const</span></code></dt><dd><p><strong>Effects</strong>: Determines if range is empty.</p>
<p><strong>Returns:</strong> <code class="docutils literal notranslate"><span class="pre">rows().empty()||cols().empty()</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">is_divisible()</span> <span class="pre">const</span></code></dt><dd><p><strong>Effects</strong>: Determines if range can be split into
subranges.</p>
<p><strong>Returns:</strong> <code class="docutils literal notranslate"><span class="pre">rows().is_divisible()||cols().is_divisible()</span></code></p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">row_range_type&amp;</span> <span class="pre">rows()</span> <span class="pre">const</span></code></dt><dd><p><strong>Returns:</strong>  Range containing the rows of the value space.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">col_range_type&amp;</span> <span class="pre">cols()</span> <span class="pre">const</span></code></dt><dd><p><strong>Returns:</strong>  Range containing the columns of the value space.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="blocked_range3d_cls.html" class="btn btn-neutral float-right" title="blocked_range3d Template Class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="blocked_range_cls.html" class="btn btn-neutral float-left" title="blocked_range Template Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>