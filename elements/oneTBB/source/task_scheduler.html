

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Task Scheduler &mdash; oneAPI Specification 0.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Floating-point Settings" href="task_scheduler/fpu_settings.html" />
    <link rel="prev" title="remove_edge Template Function" href="flow_graph/remove_edge_func.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dpcpp/source/index.html">DPC++ 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneDPL/source/index.html">oneDPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneDNN/source/index.html">oneDNN 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneCCL/source/index.html">oneCCL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l0/source/index.html">Level Zero 0.91</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneDAL/source/index.html">oneDAL 0.7</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="nested-index.html">oneTBB 0.7</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nested-gen-info.html">General Information</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="nested-interfaces.html">oneTBB Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="flow_graph.html">Flow Graph</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Task Scheduler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/fpu_settings.html">Floating-point Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_group_context.html">task_group_context</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_arena_cls.html">task_arena Class and this_task_arena Namespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html">task_scheduler_observer</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups.html">Task Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/tbb_global_control.html">global_control Class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="containers.html">Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="thread_local_storage.html">Thread Local Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="nested-aux-interfaces.html">oneTBB Auxiliary Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../oneVPL/source/index.html">oneVPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneMKL/source/index.html">oneMKL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="nested-index.html">oneTBB 0.7</a> </li>
          
        
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneTBB/source/task_scheduler.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="task-scheduler">
<h1>Task Scheduler<a class="headerlink" href="#task-scheduler" title="Permalink to this headline">¶</a></h1>
<p>oneAPI Threading Building Blocks
provides a task scheduler, which is the engine that drives the algorithm
templates and task groups. You may also call it directly. Using tasks is often
simpler and more efficient than using threads, because the task scheduler takes
care of a lot of details.</p>
<p>The tasks are quanta of computation. The scheduler
maps these onto physical threads. The mapping is non-preemptive. Each task
has a method <code class="docutils literal notranslate"><span class="pre">execute()</span></code>. Once a thread starts running
<code class="docutils literal notranslate"><span class="pre">execute()</span></code>, the task is bound to that thread until
<code class="docutils literal notranslate"><span class="pre">execute()</span></code> returns. During that time, the thread services
other tasks only when it waits for completion of child tasks or nested
parallel constructs, as described below. While waiting, it may run any available
task, including unrelated tasks created by this or other threads.</p>
<p>The task scheduler is intended for parallelizing
computationally intensive work. Because task objects are not scheduled preemptively,
they should generally avoid making calls that might block a thread for long periods
during which the thread cannot service other tasks.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>There is no guarantee that
<em>potentially</em> parallel tasks
<em>actually</em> execute in parallel, because the scheduler adjusts
actual parallelism to fit available worker threads. For example, given a single
worker thread, the scheduler creates no actual parallelism. For example, it is
generally unsafe to use tasks in a producer consumer relationship, because
there is no guarantee that the consumer runs at all while the producer is
running.</p>
</div>
<p>Potential parallelism is typically generated by a
<em>split/join</em> pattern. Two basic patterns of split/join are
supported. The most efficient is continuation-passing form, in which the
programmer constructs an explicit “continuation” task. The parent task creates
child tasks and specifies a continuation task to be executed when the children
complete. The continuation inherits the parent’s ancestor. The parent task then
exits; it does not block on its children. The children subsequently run, and
after they (or their continuations) finish, the continuation task starts
running. The figure, “Continuation-passing Style,” shows the steps. The running
tasks at each step are shaded.</p>
<div class="figure align-default" id="id1">
<img alt="../../../_images/06000005.png" src="../../../_images/06000005.png" />
<p class="caption"><span class="caption-text">Continuation-passing Style</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Explicit continuation passing is efficient, because
it decouples the thread’s stack from the tasks. However, it is more difficult
to program. A second pattern is “blocking style”, which uses implicit
continuations. It is sometimes less efficient in performance, but more
convenient to program. In this pattern, the parent task blocks until its
children complete, as shown in the figure below.</p>
<div class="figure align-default" id="id2">
<img alt="../../../_images/08000006.png" src="../../../_images/08000006.png" />
<p class="caption"><span class="caption-text">Blocking Style</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The convenience comes with a price. While the blocked parent task
remains in the stack, the thread can steal and run another task. Continually stealing
and blocking could cause the stack to grow without bound. To solve this problem,
the scheduler may constrain a blocked thread such that it stops stealing.
This constraint limits available parallelism and may impact performance.</p>
<p>High-level TBB constructs built on top of the task scheduler,
such as parallel algorithms and flow graphs, use continuation passing for recursive
parallelism and blocking for completion of the whole parallel construct.</p>
<p>See also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="algorithms.html"><span class="doc">Algorithms</span></a></p></li>
<li><p><a class="reference internal" href="flow_graph.html"><span class="doc">Flow Graph</span></a></p></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="task_scheduler/fpu_settings.html">Floating-point Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="task_scheduler/task_group_context.html">task_group_context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_group_context.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_group_context.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_group_context.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_group_context.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_group_context.html#members">Members</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="task_scheduler/task_arena_cls.html">task_arena Class and this_task_arena Namespace</a><ul>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_arena_cls.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_arena_cls.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_arena_cls.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_arena_cls.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_arena_cls.html#members">Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_arena_cls.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html">task_scheduler_observer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html#members">Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_scheduler_observer.html#example">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="task_scheduler/task_scheduler_observer/task_scheduler_observer_member.html">task_scheduler_observer Member</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="task_scheduler/task_groups.html">Task Groups</a><ul>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_groups.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_groups.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/task_groups.html#header">Header</a><ul>
<li class="toctree-l3"><a class="reference internal" href="task_scheduler/task_groups/task_group_cls.html">task_group Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/task_group_cls.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/task_group_cls.html#example-with-lambda-expressions">Example with Lambda Expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/task_group_cls.html#members">Members</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="task_scheduler/task_groups/task_group_status_enum.html">task_group_status Enum</a><ul>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/task_group_status_enum.html#members">Members</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="task_scheduler/task_groups/task_handle_cls.html">task_handle Template Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/task_handle_cls.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/task_handle_cls.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/task_handle_cls.html#members">Members</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="task_scheduler/task_groups/make_task_func.html">make_task Template Function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/make_task_func.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="task_scheduler/task_groups/make_task_func.html#syntax">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="task_scheduler/task_groups/is_current_task_group_canceling_func.html">is_current_task_group_canceling Function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="task_scheduler/tbb_global_control.html">global_control Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/tbb_global_control.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/tbb_global_control.html#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/tbb_global_control.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/tbb_global_control.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/tbb_global_control.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="task_scheduler/tbb_global_control.html#members">Members</a></li>
</ul>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="task_scheduler/fpu_settings.html" class="btn btn-neutral float-right" title="Floating-point Settings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flow_graph/remove_edge_func.html" class="btn btn-neutral float-left" title="remove_edge Template Function" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>